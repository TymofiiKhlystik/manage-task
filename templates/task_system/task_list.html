{% include 'includes/navigation.html' %}
{% include 'layouts/base.html' %}


{% block title %}{% endblock %}

{% block content %}
  <h2 class="mb-4">List Tasks</h2>

  <table class="table table-striped table-hover shadow-sm">
    <thead class="bg-gradient-primary" style="color:white;">
    <tr>
      <th>ID</th>
      <th>Name task</th>
      <th>Type</th>
      <th>Priority</th>
      <th>Team</th>
      <th>Workers</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {% for task in task_list %}
      <tr>
        <td><a href="{% url 'task-detail' task.id %}">Task #{{ task.id }}</a></td>
        <td>{{ task.name }}</td>
        <td>{{ task.task_type.name }}</td>
        <td>{{ task.get_priority_display }}</td>
        <td>{{ task.team.name|default:"-" }}</td>
        <td>
          {% if task.team or task.team.workers.exists %}
            {% for worker in task.team.workers.all %}
              {{ worker.first_name }} {{ worker.last_name }}
              <br>
            {% endfor %}
          {% elif task.assignees.exists %}
            {% for worker in task.assignees.all %}
              {{ worker.first_name }} {{ worker.last_name }}
              <br>
            {% endfor %}
          {% else %}
            <div style="color:#d92163; font-weight:bold; padding:5px; border:1px solid #d92163; display:inline-block;">
              Task not taken
            </div>
          {% endif %}
        </td>
        <td>
          {% if task.is_complete %}
            <span class="badge bg-success">Done</span>
          {% else %}
            <span class="badge bg-warning text-dark">is being done</span>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="7" class="text-center text-muted">No tasks yet</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>{% if is_paginated %}
  {% include "includes/pagination.html" %}
{% endif %}


{% endblock %}